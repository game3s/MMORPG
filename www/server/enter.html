<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=gbk">
  </head>
  <body>
    <br>
    主页 目录<br>
    <hr width="100%" size="2"><br>
    <br>
    <font size="+3">【接入服务器】</font><br>
    <br>
    关键词：代理网关、反向代理<br>
    <br>
    TCP长连接<br>
    <br>
    职责<br>
    <table width="1143" height="94" cellspacing="0" cellpadding="0"
      border="0">
      <tbody>
        <tr>
          <td valign="top">
            <ul>
              <li>确认客户端身份（账户），通过令牌进行</li>
              <li>转发客户端和游戏场景之间的消息</li>
              <li>客户端和接入服务器之间通信加密（可选）</li>
              <li>负载均衡众多的客户端连接，拒绝更多的客户端进入，避免游戏场景服务器因为人多问题</li>
              <li>拒绝设定的IP地址</li>
              <li>客户端一旦连接后，切换游戏场景不用进行网络重连</li>
              <li>判断客户端是否在线（客户端是否超时都没有来数据）<br>
              </li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
    <br>
    <br>
    相关<br>
    <table width="1143" height="94" cellspacing="0" cellpadding="0"
      border="0">
      <tbody>
        <tr>
          <td valign="top">
            <ul>
              <li>消息队列</li>
              <li>代理服务器</li>
              <li>登录服务器<br>
              </li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
    <br>
    <br>
    <br>
    特性<br>
    <ul>
      <li>TCP，SSL</li>
      <li>多线程<br>
      </li>
    </ul>
    <p><br>
    </p>
    <p><br>
    </p>
    <p>示例</p>
    <p>请求验证（账号+密码）<br>
      https://127.0.0.1:543/sso.auth?u=2134&amp;p=123456&amp;<br>
    </p>
    <ul>
      <li> 700 账号或者密码错误</li>
      <li>701 账号被锁定/黑名单</li>
      <li>702 账号已经在使用</li>
      <li>800 请求参数不足</li>
      <li>900 未知错误<br>
      </li>
    </ul>
    <p></p>
    <p>&lt;xml&gt;<br>
      &lt;sso_auth code="0"&nbsp; uuid="12322"
      &gt;xxsdfxxxsfsd&lt;/sso_auth&gt;<br>
      &lt;/xml&gt;<br>
    </p>
    <table width="100%" cellspacing="2" cellpadding="2" border="1">
      <tbody>
        <tr>
          <td valign="top">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>
            &lt;!-- 返回错误编号 0 没有错误 --&gt;<br>
            &lt;xml err="0"&gt;<br>
            &lt;!-- 账号名 : 后面是密码 如果是游客登录的时候将存在 --&gt;<br>
            &lt;acct&gt;132341232:123456&lt;/acct&gt;<br>
            &lt;!-- 账号唯一编号 --&gt;<br>
            &lt;uuid&gt;xxdfs23sf&lt;/uuid&gt;<br>
            &lt;!-- 网络令牌 --&gt;<br>
            &lt;token&gt;dads7193xsfd&lt;/token&gt;<br>
            &lt;!-- 获取网关列表 --&gt;<br>
&lt;gate&gt;http:://127.0.0.1/gate.php?n=xxx&amp;&lt;/gate&gt;<br>
            &lt;/xml&gt;<br>
          </td>
        </tr>
      </tbody>
    </table>
    <p><br>
    </p>
    <p>请求当前账号游戏角色情况（带cookies）<br>
      https://127.0.0.1:543/game.info?n=xxx&amp;</p>
    <p>参数n是产品名称<br>
    </p>
    <p>&lt;xml&gt;</p>
    <p>&lt;g name="飞车狂飙" last_realmd="1"&gt;</p>
    <p>&lt;!-- <br>
    </p>
    <p>state open close queue<br>
      --&gt;<br>
      &lt;a realmd="1"&nbsp; name="游戏1区" flag="" gate="127.0.0.1:564"
      state="open"&nbsp; actors="4" /&gt;<br>
    </p>
    <p>&lt;/g&gt;<br>
      &lt;/xml&gt;<br>
    </p>
    <p><br>
    </p>
    <p>请求验证回话令牌（带cookies）<br>
      http://127.0.0.1:521/sin.verify?u=1321&amp;<br>
      结果：<br>
      0 正确<br>
      1 令牌过期<br>
      2 账号不存在<br>
    </p>
    <p><br>
      1）登录成功获得令牌和接入服务器<br>
      2）使用令牌向接入服务器获得角色列表，或者直接获得默认第一个角色信息</p>
    <p>3）（可选）获得游戏中需要的场景位置<br>
    </p>
    <p>4）使用角色进入到游戏中（只需要提供角色唯一编号）其他由服务器自己获得（部分游戏，提交的信息内容多一些，例如名字等）。<br>
    </p>
    <p><br>
    </p>
    <p><br>
      <br>
    </p>
    <p><br>
      <br>
    </p>
    <p><br>
      <br>
    </p>
  </body>
</html>
